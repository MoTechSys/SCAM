# ุชูุฑูุฑ ุงูุชุญููู ุงูุดุงูู ููุดุฑูุน S-ACM

## ๐ ุงูุฎุทูุฉ 1: ุฃุณุฆูุฉ ุชุญููููุฉ

### ุฃ) ุชุญููู ุงูููุฏ

#### 1. ูุง ูู ุงูู API Endpoints ุงูููุฌูุฏุฉ ูู `apps/backend/src/routes/`ุ

| ุงูููู | ุงููุณุงุฑ ุงูุฃุณุงุณู | ุงููุตู |
|-------|---------------|-------|
| `auth.ts` | `/api/auth` | ุชุณุฌูู ุงูุฏุฎููุ ุงูุฎุฑูุฌุ ุชุฌุฏูุฏ ุงูุชููู |
| `users.ts` | `/api/users` | ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู (CRUD) |
| `roles.ts` | `/api/roles` | ุฅุฏุงุฑุฉ ุงูุฃุฏูุงุฑ ูุงูุตูุงุญูุงุช |
| `courses.ts` | `/api/courses` | ุฅุฏุงุฑุฉ ุงูููุฑุฑุงุช ุงูุฏุฑุงุณูุฉ |
| `files.ts` | `/api/files` | ุฑูุน ูุฅุฏุงุฑุฉ ุงููููุงุช |
| `academic.ts` | `/api/academic` | ุงูุฃูุณุงูุ ุงูุชุฎุตุตุงุชุ ุงููุณุชููุงุช |
| `notifications.ts` | `/api/notifications` | ุงูุฅุดุนุงุฑุงุช |
| `reports.ts` | `/api/reports` | ุงูุชูุงุฑูุฑ ูุงูุฅุญุตุงุฆูุงุช |
| `ai.ts` | `/api/ai` | ุงูุฐูุงุก ุงูุงุตุทูุงุนู (ูุญุงุฏุซุงุชุ ุชูุฎูุตุ ุชุฑุฌูุฉ) |
| `audit.ts` | `/api/audit` | ุณุฌูุงุช ุงูุชุฏููู |
| `trash.ts` | `/api/trash` | ุณูุฉ ุงููุญุฐููุงุช |
| `settings.ts` | `/api/settings` | ุฅุนุฏุงุฏุงุช ุงููุธุงู |

**ุงููุฌููุน: 12 ููู routes**

---

#### 2. ูู ููุฌุฏ ุฅุนุฏุงุฏ ูู Supabase Storage ูู ุงูููุฏุ

**โ ูุนูุ ููุฌูุฏ ูู:**
- `apps/backend/src/lib/supabase.ts`

**ุงูุชูุงุตูู:**
```typescript
export const STORAGE_BUCKET = 'files';

export async function uploadFile(file, path, contentType) {
  // ูุฑูุน ุงูููู ุฅูู Supabase Storage
  const { data, error } = await supabase.storage
    .from(STORAGE_BUCKET)
    .upload(path, file, { contentType, upsert: true });
  // ...
}

export async function deleteFile(path) {
  // ูุญุฐู ุงูููู ูู Storage
}

export function getPublicUrl(path) {
  // ูุญุตู ุนูู ุฑุงุจุท ุนุงู ููููู
}
```

**ุงูุงุณุชุฎุฏุงู ูู:**
- `apps/backend/src/routes/files.ts` - endpoint `/api/files/upload`

---

#### 3. ูุง ูู ุงูุฌุฏุงูู ุงููุณุชุฎุฏูุฉ ูุนููุงู ูู ุงูููุฏุ

| ุงูุฌุฏูู | ุนุฏุฏ ุงูุตููู | ุงูุญุงูุฉ |
|--------|-----------|--------|
| `roles` | 3 | โ ูุญุชูู ุจูุงูุงุช |
| `users` | 1 | โ ูุญุชูู ุจูุงูุงุช |
| `departments` | 1 | โ ูุญุชูู ุจูุงูุงุช |
| `audit_logs` | 4 | โ ูุญุชูู ุจูุงูุงุช |
| `refresh_tokens` | 3 | โ ูุญุชูู ุจูุงูุงุช |
| `majors` | 0 | โช ูุงุฑุบ |
| `levels` | 0 | โช ูุงุฑุบ |
| `courses` | 0 | โช ูุงุฑุบ |
| `files` | 0 | โช ูุงุฑุบ |
| `notifications` | 0 | โช ูุงุฑุบ |
| `ai_conversations` | 0 | โช ูุงุฑุบ |
| `settings` | 0 | โช ูุงุฑุบ |

**ุงููุฌููุน: 12 ุฌุฏูู**

---

#### 4. ูู ููุงู middleware ููุชุญูู ูู ุงูุตูุงุญูุงุช ุนูู ูู endpointุ

**โ ูุนู!** ุฌููุน ุงูู endpoints ูุญููุฉ ุจู middleware:

- `requirePermission('permission_name')` - ูุชุทูุจ ุตูุงุญูุฉ ูุญุฏุฏุฉ
- `requireAnyPermission(['perm1', 'perm2'])` - ูุชุทูุจ ุฃู ูู ุงูุตูุงุญูุงุช
- `requireAllPermissions(['perm1', 'perm2'])` - ูุชุทูุจ ุฌููุน ุงูุตูุงุญูุงุช

**ููุงุญุธุฉ:** ุชู ุฅุตูุงุญ ุตูุงุญูุฉ `"all"` ูููุฏูุฑ ูู commit `b1dfb78`

---

### ุจ) ุชุญููู ูุงุนุฏุฉ ุงูุจูุงูุงุช

**ุนุฏุฏ ุงูุฌุฏุงูู:** 12 ุฌุฏูู

**ุงูุฌุฏุงูู ุงูุชู ุชุญุชูู ุจูุงูุงุช:**
1. `roles` - 3 ุตููู (admin, instructor, student)
2. `users` - 1 ุตู (ูุฏูุฑ ุงููุธุงู)
3. `departments` - 1 ุตู (ูุณู ุนููู ุงูุญุงุณุจ)
4. `audit_logs` - 4 ุตููู
5. `refresh_tokens` - 3 ุตููู

**ุงูุฌุฏุงูู ุงููุงุฑุบุฉ:**
- `majors`, `levels`, `courses`, `files`, `notifications`, `ai_conversations`, `settings`

---

### ุฌ) ุชุญููู Storage

**โ ูุง ููุฌุฏ Bucket ูู Supabase Storage!**

ุงูุงุณุชุนูุงู `SELECT * FROM storage.buckets;` ุฃุฑุฌุน ูุชูุฌุฉ ูุงุฑุบุฉ.

**ุงููุทููุจ:** ุฅูุดุงุก bucket ุจุงุณู `files` ูุชูุนูู ุฑูุน ุงููููุงุช.

---

## ๐ ููุฎุต ุงูุญุงูุฉ

| ุงูุนูุตุฑ | ุงูุญุงูุฉ | ููุงุญุธุงุช |
|--------|--------|---------|
| Backend | โ ูุนูู | ุงููููุฐ 5005 |
| Frontend | โ ูุนูู | ุงููููุฐ 3000 |
| ูุงุนุฏุฉ ุงูุจูุงูุงุช | โ ูุชุตูุฉ | 12 ุฌุฏูู |
| ุชุณุฌูู ุงูุฏุฎูู | โ ูุนูู | admin@s-acm.com |
| ุงูุตูุงุญูุงุช | โ ุชุนูู | ุชู ุฅุตูุงุญ "all" |
| Storage Bucket | โ ุบูุฑ ููุฌูุฏ | ูุญุชุงุฌ ุฅูุดุงุก |

---

## ๐ง ุงูุฅุฌุฑุงุกุงุช ุงููุทููุจุฉ

1. **ุฅูุดุงุก Storage Bucket** ุจุงุณู `files`
2. **ุงุฎุชุจุงุฑ ุฌููุน ุงูู Endpoints**
3. **ุงุฎุชุจุงุฑ ุฑูุน ุงููููุงุช**
